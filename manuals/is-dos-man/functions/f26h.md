# Function 25h: Block Write

## Parameters

**DE** = Pointer to opened FCB  
**HL** = Number of records to write

## Results

**A** =
 - **00h**: if no error
 - **01h**: if error

## Description

This function is the preferred method of writing data to files for programs which do not have to be CP/M compatible. It is compatible with MSX-DOS, but in CP/M there is no corresponding function. Data can be written in large blocks which can be much faster than normal CP/M writes.

Data is written from the current disk transfer address to the position in the file defined by the random record number. The record size is determined by the record size field in the FCB (bytes **0Eh** and **0Fh**), which must be set by the user after opening the file and before calling this function. If the record size is less than **64 bytes**, then all four bytes of the random record number are used; otherwise only the first three are used.

The number of records to be written its specified by **HL**, and together with the record size this determines the amount of data to be written. An error will be returned if the write attempts to go above the top of memory (**FFFFh**), thus limiting the maximum size of a transfer.

After writing the data, the random record field is adjusted to the next record number in the file (ie **HL** is added on to it). The current record and extent fields are not used or altered. The file size field is updated if the file has been extended.

The record size can be any value from **1**...**0FFFFh**. Small record sizes are no less efficient than large record sizes, so if desired the record size can be set to one and the record count then becomes a byte count. It is desirable to read as much as possible with one function call, since one large transfer will be quicker than several small ones.

The MSX-DOS version of this function has a special case if the number of records specified is zero. This is used to allow the file size to be explicitly changed, allocating or freeing disk space as required. This facility is not supported by IS-DOS.

----

See also [Function 27h](f27h.md).
