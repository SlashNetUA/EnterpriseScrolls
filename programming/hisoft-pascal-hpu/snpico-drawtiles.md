# Виведення "тайлової" графіки

Для виводу піксельної графіки можна користуватись декількома методами:
- перевизначити символи шрифту та виводити у двох режимах:
	- одноколірний (з прозорим кольором фону) розміром до 8×9 пікселів (попіксельне позиціонування); 
	- 16 колірний (без прозорого кольору) розміром 2×9 пікселів (тільки парні x-координати);  
- спрайти (15 кольорів + 1 прозорий) розміром до 11×21 пікселів із збереженням фону (попіксельне позиціонування, але займають багато місця в пам'яті);
- 16 колірні тайли без прозорого кольору майже довільного розміру (парної ширини і тільки парні x-координати);  

Для останнього варіанту я зробив такий метод де тайли зберігаються у зовнішньому файлі у вигляді дампу пам'яті 16-колірного режиму. Перед використанням вони завантажуються у ділянку пам'яті, а потім відносно швидко виводяться простим копіюванням звідти у відеосторінку.

Ось приклад процедури для виводу тайлів 8×8 пікселів:

```
procedure DrawTile8(ti,tx,ty:integer);
var tilerow,saddr:integer;
begin
  saddr:=addr(tile8)+32*ti;
  for tilerow:=0 to 7 do
    POKE((#C000+((ty+tilerow)*64+tx)),peek(saddr+4*tilerow,array[1..4] OF CHAR));
end;
```

Кожен тайл 8×8 пікселів займає 32 байти, а кожна лінія тайлу - 4 байти.
- **ti**: (tile index) номер тайлу починаючи з 0;
- **tx**: (tile x) координата для виводу;
- **ty**: (tile y) координата для виводу;
- **saddr**: (source address) адреса розміщення тайлів;

Завантажуємо файл з тайлами по адресі масиву tile8:
```
tin('TILE8.BIN',addr(tile8));  
```

Виводимо на екран конкретний тайл у потрібних координатах:
```
DrawTile8(tindex,dx,dy);
```

Аналогічно, перед виводом тайлу можна зберегти потрібну область фону у змінну чи пам'ять розміром 32 байти, щоб пізніше можна було відтворити фон.

Ось варіант процедури з використанням машинного коду який виконується значно швидше:

```
procedure DrawTile(Source,Destination:integer; Height:char);
begin
  inline(#DD,#7E,#02,#DD,#5E,#03,#DD,#56);
  inline(#04,#DD,#6E,#05,#DD,#66,#06,#06);
  inline(#00,#0E,#40,#ED,#A0,#ED,#A0,#ED);
  inline(#A0,#ED,#A0,#EB,#09,#EB,#3D,#20);
  inline(#F0);
end;

procedure DrawTile8(tileindex,tx,ty:integer);
var da,sa:integer;
begin
  sa:=addr(tile8)+32*tileindex;
  da:=#C000+(ty*64+tx);
  DrawTile(sa,da,chr(8));
end;
```
